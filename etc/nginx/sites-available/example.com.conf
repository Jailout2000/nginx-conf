server {

  # On nginx >= 1.10.0, remove 'deferred' below:
  listen       80 deferred;
  listen       [::]:80 deferred;
  server_name  .example.com;

  include      conf.d/error-pages.conf;
  include      conf.d/gzip.conf;
  include      conf.d/url-filter*.conf;

  location / {
    return  301  https://$host$uri$is_args$args;
  }

}
server {

  ssl_certificate      sites-certs/example-www.crt;
  ssl_certificate_key  sites-certs/example-www.key;

  # On nginx >= 1.10.0, remove 'deferred' below:
  listen       443 ssl spdy deferred;
  listen       [::]:443 ssl spdy deferred;
  server_name  .example.com;

  include      conf.d/error-pages.conf;
  include      conf.d/gzip.conf;
  include      conf.d/php.conf;
  include      conf.d/url-filter*.conf;

  set $PHP_DISPLAY_ERRORS "On";
  set $PHP_ERROR_REPORTING "24567"; # E_ALL & ~E_NOTICE & ~E_DEPRECATED
  set $NEWRELIC_APPNAME "Example Application";
  set $PHP_SHORT_TAG "Off";

  root   /home/nginx/example-www;
  index  index.xml index.html index.htm;

}
